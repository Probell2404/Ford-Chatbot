const express = require('express');
const line = require('@line/bot-sdk');
const axios = require('axios');

// Load environment variables
require('dotenv').config();

// LINE Channel Configuration
const config = {
  channelAccessToken: process.env.CHANNEL_ACCESS_TOKEN,
  channelSecret: process.env.CHANNEL_SECRET
};

// à¸ªà¸£à¹‰à¸²à¸‡ LINE client
const client = new line.Client(config);

// à¸ªà¸£à¹‰à¸²à¸‡ Express app
const app = express();

// à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸–à¸¢à¸™à¸•à¹Œ Ford (à¸ˆà¸²à¸à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²)
const fordData = {
  ranger: {
    name: "Ford Ranger 2024-2025",
    models: ["XL", "XLT", "Sport", "Wildtrak", "Platinum", "Raptor"],
    engines: [
      {
        type: "2.3L Turbo 4-cylinder",
        power: "270 HP",
        description: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹€à¸šà¸™à¸‹à¸´à¸™à¹€à¸—à¸­à¸£à¹Œà¹‚à¸š 4 à¸ªà¸¹à¸š à¸‚à¸™à¸²à¸” 2.3 à¸¥à¸´à¸•à¸£"
      },
      {
        type: "2.7L Twin-Turbo V6",
        power: "315 HP", 
        description: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹€à¸šà¸™à¸‹à¸´à¸™à¸—à¸§à¸´à¸™à¹€à¸—à¸­à¸£à¹Œà¹‚à¸š V6 à¸‚à¸™à¸²à¸” 2.7 à¸¥à¸´à¸•à¸£"
      }
    ],
    features: [
      "Pro Trailer Backup Assist",
      "Flexible Rack System",
      "Heavy-duty suspension",
      "Automatic stop/start system"
    ],
    priceRange: "à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ 559,000 à¸šà¸²à¸—"
  },
  everest: {
    name: "Ford Everest 2024-2025",
    seating: "7 à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡",
    variants: 7,
    engines: [
      {
        type: "2.0L Single-Turbo EcoBlue Diesel",
        power: "170 HP",
        torque: "405 Nm",
        rpmRange: "1,750-2,500 RPM"
      },
      {
        type: "3.0L V6 Diesel",
        displacement: "2993 cc",
        description: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¸”à¸µà¹€à¸‹à¸¥ V6"
      }
    ],
    transmission: "à¹€à¸à¸µà¸¢à¸£à¹Œà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´",
    features: [
      "12-inch touchscreen infotainment",
      "Wireless Apple CarPlay & Android Auto", 
      "12.4-inch digital driver display",
      "Panoramic sunroof",
      "Wireless phone charging",
      "Dual-zone AC",
      "12-speaker Bang & Olufsen sound system",
      "Powered tailgate",
      "360-degree camera",
      "Bird's eye view"
    ],
    cargo: {
      normal: "259L",
      maximum: "1800L+ (à¹€à¸¡à¸·à¹ˆà¸­à¸žà¸±à¸šà¹€à¸šà¸²à¸°à¹à¸–à¸§à¸—à¸µà¹ˆ 2 à¹à¸¥à¸° 3)"
    },
    suspension: "Double wishbone independent front, Live axle with leaf spring rear"
  }
};

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š Ford
function getResponseText(messageText) {
  const text = messageText.toLowerCase();
  
  // à¸„à¸³à¸—à¸±à¸à¸—à¸²à¸¢
  if (text.includes('à¸ªà¸§à¸±à¸ªà¸”à¸µ') || text.includes('hello') || text.includes('hi')) {
    return `à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š! ðŸš—
à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¹‚à¸Šà¸§à¹Œà¸£à¸¹à¸¡à¸Ÿà¸­à¸£à¹Œà¸” à¸ªà¸²à¸‚à¸²à¸žà¸£à¸°à¸›à¸£à¸°à¹à¸”à¸‡

à¸œà¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸Šà¹ˆà¸§à¸¢à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š:
ðŸ”¹ Ford Ranger 2024-2025
ðŸ”¹ Ford Everest 2024-2025 
ðŸ”¹ à¸ªà¹€à¸›à¸„ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´
ðŸ”¹ à¸£à¸²à¸„à¸² à¹à¸¥à¸°à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™

à¸à¸£à¸¸à¸“à¸²à¸–à¸²à¸¡à¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆà¸ªà¸™à¹ƒà¸ˆà¹„à¸”à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š!`;
  }

  // à¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š Ranger
  if (text.includes('ranger')) {
    if (text.includes('à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ') || text.includes('engine') || text.includes('à¸ªà¹€à¸›à¸„')) {
      return `ðŸš› Ford Ranger 2024-2025 - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ

ðŸ”§ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¸—à¸µà¹ˆ 1:
â€¢ ${fordData.ranger.engines[0].type}
â€¢ à¸à¸³à¸¥à¸±à¸‡: ${fordData.ranger.engines[0].power}
â€¢ ${fordData.ranger.engines[0].description}

ðŸ”§ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¸—à¸µà¹ˆ 2:
â€¢ ${fordData.ranger.engines[1].type}  
â€¢ à¸à¸³à¸¥à¸±à¸‡: ${fordData.ranger.engines[1].power}
â€¢ ${fordData.ranger.engines[1].description}

ðŸ“‹ à¸£à¸¸à¹ˆà¸™à¸—à¸µà¹ˆà¸¡à¸µà¸ˆà¸³à¸«à¸™à¹ˆà¸²à¸¢:
${fordData.ranger.models.join(', ')}

ðŸ’° à¸£à¸²à¸„à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™: ${fordData.ranger.priceRange}

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™à¸„à¸£à¸±à¸š?`;
    }
    
    if (text.includes('à¸£à¸²à¸„à¸²') || text.includes('price')) {
      return `ðŸ’° Ford Ranger 2024-2025 - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸²à¸„à¸²

à¸£à¸²à¸„à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™: ${fordData.ranger.priceRange}

ðŸ“‹ à¸£à¸¸à¹ˆà¸™à¸—à¸µà¹ˆà¸¡à¸µà¸ˆà¸³à¸«à¸™à¹ˆà¸²à¸¢:
${fordData.ranger.models.map((model, index) => `${index + 1}. ${model}`).join('\n')}

ðŸ“ž à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸²à¸„à¸²à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¹à¸¥à¸°à¸à¸²à¸£à¸ˆà¸­à¸‡à¸—à¸”à¸¥à¸­à¸‡à¸‚à¸±à¸š
à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­: à¹‚à¸Šà¸§à¹Œà¸£à¸¹à¸¡à¸Ÿà¸­à¸£à¹Œà¸” à¸žà¸£à¸°à¸›à¸£à¸°à¹à¸”à¸‡

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸·à¹ˆà¸™à¹† à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡à¸„à¸£à¸±à¸š?`;
    }

    return `ðŸš› Ford Ranger 2024-2025

${fordData.ranger.name} à¸¡à¸µà¹ƒà¸«à¹‰à¹€à¸¥à¸·à¸­à¸ ${fordData.ranger.models.length} à¸£à¸¸à¹ˆà¸™:
${fordData.ranger.models.map((model, index) => `${index + 1}. ${model}`).join('\n')}

âœ¨ à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹€à¸”à¹ˆà¸™:
${fordData.ranger.features.map(feature => `â€¢ ${feature}`).join('\n')}

ðŸ’° à¸£à¸²à¸„à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™: ${fordData.ranger.priceRange}

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸—à¸£à¸²à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™à¸„à¸£à¸±à¸š?
- à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹à¸¥à¸°à¸ªà¹€à¸›à¸„
- à¸£à¸²à¸„à¸²à¹à¸¥à¸°à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™`;
  }

  // à¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š Everest
  if (text.includes('everest')) {
    if (text.includes('à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ') || text.includes('engine') || text.includes('à¸ªà¹€à¸›à¸„')) {
      return `ðŸš™ Ford Everest 2024-2025 - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ

ðŸ”§ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¸—à¸µà¹ˆ 1:
â€¢ ${fordData.everest.engines[0].type}
â€¢ à¸à¸³à¸¥à¸±à¸‡: ${fordData.everest.engines[0].power}
â€¢ à¹à¸£à¸‡à¸šà¸´à¸”: ${fordData.everest.engines[0].torque}
â€¢ à¸Šà¹ˆà¸§à¸‡à¸£à¸­à¸š: ${fordData.everest.engines[0].rpmRange}

ðŸ”§ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¸—à¸µà¹ˆ 2:
â€¢ ${fordData.everest.engines[1].type}
â€¢ à¸‚à¸™à¸²à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ: ${fordData.everest.engines[1].displacement}

âš™ï¸ à¸£à¸°à¸šà¸šà¸ªà¹ˆà¸‡à¸à¸³à¸¥à¸±à¸‡: ${fordData.everest.transmission}
ðŸ‘¥ à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡: ${fordData.everest.seating}
ðŸ“¦ à¸ˆà¸³à¸™à¸§à¸™à¸£à¸¸à¹ˆà¸™: ${fordData.everest.variants} à¸£à¸¸à¹ˆà¸™

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™à¸„à¸£à¸±à¸š?`;
    }

    if (text.includes('à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´') || text.includes('feature') || text.includes('à¸­à¸­à¸›à¸Šà¸±à¹ˆà¸™')) {
      return `ðŸš™ Ford Everest 2024-2025 - à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹à¸¥à¸°à¸­à¸­à¸›à¸Šà¸±à¹ˆà¸™

ðŸ“± à¸£à¸°à¸šà¸šà¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¹à¸¥à¸°à¸šà¸±à¸™à¹€à¸—à¸´à¸‡:
â€¢ ${fordData.everest.features[0]}
â€¢ ${fordData.everest.features[1]}
â€¢ ${fordData.everest.features[2]}
â€¢ ${fordData.everest.features[6]}

ðŸ  à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸à¸ªà¸šà¸²à¸¢:
â€¢ ${fordData.everest.features[3]}
â€¢ ${fordData.everest.features[4]}
â€¢ ${fordData.everest.features[5]}
â€¢ ${fordData.everest.features[7]}

ðŸŽ¥ à¸£à¸°à¸šà¸šà¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢:
â€¢ ${fordData.everest.features[8]}
â€¢ ${fordData.everest.features[9]}

ðŸ“¦ à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¹€à¸à¹‡à¸šà¸‚à¸­à¸‡:
â€¢ à¸›à¸à¸•à¸´: ${fordData.everest.cargo.normal}
â€¢ à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: ${fordData.everest.cargo.maximum}

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸·à¹ˆà¸™à¹† à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡à¸„à¸£à¸±à¸š?`;
    }

    return `ðŸš™ Ford Everest 2024-2025

SUV ${fordData.everest.seating} à¸ªà¸¸à¸”à¸«à¸£à¸¹ à¸žà¸£à¹‰à¸­à¸¡à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸¥à¹‰à¸³à¸ªà¸¡à¸±à¸¢

ðŸ“Š à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸·à¹‰à¸™à¸à¸²à¸™:
â€¢ ${fordData.everest.seating}
â€¢ ${fordData.everest.variants} à¸£à¸¸à¹ˆà¸™à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¸­à¸
â€¢ ${fordData.everest.transmission}

ðŸŽ¯ à¹„à¸®à¹„à¸¥à¸—à¹Œà¹€à¸”à¹ˆà¸™:
â€¢ à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸ªà¸±à¸¡à¸œà¸±à¸ª 12 à¸™à¸´à¹‰à¸§
â€¢ à¸£à¸°à¸šà¸šà¹€à¸ªà¸µà¸¢à¸‡ Bang & Olufsen
â€¢ à¸à¸¥à¹‰à¸­à¸‡ 360 à¸­à¸‡à¸¨à¸²
â€¢ à¸‹à¸±à¸™à¸£à¸¹à¸Ÿà¸žà¸²à¹‚à¸™à¸£à¸²à¸¡à¸´à¸

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸—à¸£à¸²à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™à¸„à¸£à¸±à¸š?
- à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹à¸¥à¸°à¸ªà¹€à¸›à¸„  
- à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹à¸¥à¸°à¸­à¸­à¸›à¸Šà¸±à¹ˆà¸™`;
  }

  // à¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­
  if (text.includes('à¸•à¸´à¸”à¸•à¹ˆà¸­') || text.includes('à¹‚à¸—à¸£') || text.includes('contact')) {
    return `ðŸ“ž à¸•à¸´à¸”à¸•à¹ˆà¸­à¹‚à¸Šà¸§à¹Œà¸£à¸¹à¸¡à¸Ÿà¸­à¸£à¹Œà¸” à¸žà¸£à¸°à¸›à¸£à¸°à¹à¸”à¸‡

ðŸ¢ Ford Phra Pradaeng Showroom
ðŸ“ à¸ªà¸²à¸‚à¸²à¸žà¸£à¸°à¸›à¸£à¸°à¹à¸”à¸‡

ðŸ• à¹€à¸§à¸¥à¸²à¸—à¸³à¸à¸²à¸£:
à¸ˆà¸±à¸™à¸—à¸£à¹Œ - à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ 
08:30 - 18:00 à¸™.

ðŸ“‹ à¸šà¸£à¸´à¸à¸²à¸£à¸‚à¸­à¸‡à¹€à¸£à¸²:
â€¢ à¸”à¸¹à¸£à¸–à¹à¸¥à¸°à¸—à¸”à¸¥à¸­à¸‡à¸‚à¸±à¸š
â€¢ à¸ªà¸­à¸šà¸–à¸²à¸¡à¸£à¸²à¸„à¸²à¹à¸¥à¸°à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™  
â€¢ à¸šà¸£à¸´à¸à¸²à¸£à¸«à¸¥à¸±à¸‡à¸à¸²à¸£à¸‚à¸²à¸¢
â€¢ à¸ˆà¸±à¸”à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­

ðŸŽ¯ à¸žà¸´à¹€à¸¨à¸©! à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸²à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸šà¸ªà¹ˆà¸§à¸™à¸¥à¸”à¸žà¸´à¹€à¸¨à¸©

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¸«à¸£à¸·à¸­à¸ªà¸­à¸šà¸–à¸²à¸¡à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡à¸„à¸£à¸±à¸š?`;
  }

  // à¸„à¸³à¸–à¸²à¸¡à¸—à¸±à¹ˆà¸§à¹„à¸›
  if (text.includes('à¸£à¸²à¸„à¸²') || text.includes('price')) {
    return `ðŸ’° à¸£à¸²à¸„à¸²à¸£à¸–à¸¢à¸™à¸•à¹Œ Ford 2024-2025

ðŸš› Ford Ranger: ${fordData.ranger.priceRange}
ðŸš™ Ford Everest: à¸£à¸²à¸„à¸²à¸•à¸²à¸¡à¸£à¸¸à¹ˆà¸™à¹à¸¥à¸°à¸­à¸­à¸›à¸Šà¸±à¹ˆà¸™

ðŸ“ž à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸²à¸„à¸²à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”:
à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¹‚à¸Šà¸§à¹Œà¸£à¸¹à¸¡à¹‚à¸”à¸¢à¸•à¸£à¸‡

ðŸŽ à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸žà¸´à¹€à¸¨à¸©:
â€¢ à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸–à¹€à¸à¹ˆà¸²
â€¢ à¸”à¸²à¸§à¸™à¹Œà¸•à¹ˆà¸³ à¸œà¹ˆà¸­à¸™à¸™à¸²à¸™
â€¢ à¸›à¸£à¸°à¸à¸±à¸™à¸ à¸±à¸¢à¸Ÿà¸£à¸µ
â€¢ à¸‚à¸­à¸‡à¹à¸–à¸¡à¸¡à¸²à¸à¸¡à¸²à¸¢

à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸—à¸£à¸²à¸šà¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¹„à¸«à¸¡à¸„à¸£à¸±à¸š?`;
  }

  // à¸„à¸³à¸•à¸­à¸šà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
  return `à¸‚à¸­à¸­à¸ à¸±à¸¢à¸„à¸£à¸±à¸š à¸œà¸¡à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸„à¸³à¸–à¸²à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“ ðŸ˜…

ðŸ“‹ à¸œà¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸Šà¹ˆà¸§à¸¢à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡à¹€à¸«à¸¥à¹ˆà¸²à¸™à¸µà¹‰à¹„à¸”à¹‰:

ðŸš› Ford Ranger 2024-2025:
- à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹à¸¥à¸°à¸ªà¹€à¸›à¸„
- à¸£à¸¸à¹ˆà¸™à¹à¸¥à¸°à¸£à¸²à¸„à¸²
- à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸žà¸´à¹€à¸¨à¸©

ðŸš™ Ford Everest 2024-2025:
- à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œà¹à¸¥à¸°à¸ªà¹€à¸›à¸„  
- à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹à¸¥à¸°à¸­à¸­à¸›à¸Šà¸±à¹ˆà¸™
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹ˆà¸§à¹„à¸›

ðŸ“ž à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­à¹‚à¸Šà¸§à¹Œà¸£à¸¹à¸¡

à¸à¸£à¸¸à¸“à¸²à¸–à¸²à¸¡à¸„à¸³à¸–à¸²à¸¡à¹ƒà¸«à¸¡à¹ˆ à¸«à¸£à¸·à¸­à¸žà¸´à¸¡à¸žà¹Œ "à¸ªà¸§à¸±à¸ªà¸”à¸µ" à¹€à¸žà¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸«à¸¡à¹ˆà¸„à¸£à¸±à¸š!`;
}

// Webhook endpoint à¸ªà¸³à¸«à¸£à¸±à¸š LINE
app.post('/webhook', line.middleware(config), (req, res) => {
  Promise
    .all(req.body.events.map(handleEvent))
    .then((result) => res.json(result))
    .catch((err) => {
      console.error(err);
      res.status(500).end();
    });
});

// à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ˆà¸±à¸”à¸à¸²à¸£ event
function handleEvent(event) {
  if (event.type !== 'message' || event.message.type !== 'text') {
    return Promise.resolve(null);
  }

  // à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
  const userMessage = event.message.text;
  
  // à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¸­à¸šà¸à¸¥à¸±à¸š
  const replyMessage = {
    type: 'text',
    text: getResponseText(userMessage)
  };

  // à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¸­à¸šà¸à¸¥à¸±à¸š
  return client.replyMessage(event.replyToken, replyMessage);
}

// Health check endpoint
app.get('/', (req, res) => {
  res.send('Ford LINE OA Chatbot is running! ðŸš—');
});

// à¹€à¸£à¸´à¹ˆà¸¡ server
const port = process.env.PORT || 3000;
app.listen(port, '0.0.0.0', () => {
  console.log(`Ford LINE OA Chatbot is listening on port ${port}`);
});
